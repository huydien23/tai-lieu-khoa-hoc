@model QuanLyTaiLieuKhoaHoc.Web.Models.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Trang chủ";
}

<!-- Hero Section với Gradient Background -->
<div class="hero-section">
    <div class="hero-background"></div>
    <div class="container">
        <div class="row align-items-center min-vh-75">
            <div class="col-lg-6">
                <div class="hero-content">
                    <h1 class="hero-title">Hệ thống Quản lý Tài liệu Khoa học</h1>
                    <p class="hero-subtitle" style="color: white;">Nền tảng hiện đại giúp bạn dễ dàng tìm kiếm, quản lý và chia sẻ tài liệu khoa học một cách hiệu quả.</p>
                    
                    <div class="hero-actions">
                        <a href="/TaiLieu" class="btn btn-primary btn-lg hero-btn">
                            <i class="fas fa-book me-2"></i>Khám phá tài liệu
                        </a>
                        <a href="/TaiLieu" class="btn btn-outline-light btn-lg hero-btn">
                            <i class="fas fa-search me-2"></i>Tìm kiếm nâng cao
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 d-none d-lg-block">
                <div class="hero-illustration">
                    <div class="floating-documents">
                        <div class="doc-icon doc-1"><i class="fas fa-file-alt"></i></div>
                        <div class="doc-icon doc-2"><i class="fas fa-book"></i></div>
                        <div class="doc-icon doc-3"><i class="fas fa-chart-line"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Search Section với Glassmorphism -->
<div class="search-section">
    <div class="container">
        <div class="search-container">
            <h2 class="search-title">Tìm kiếm tài liệu</h2>
            
            <form action="/TaiLieu" method="get" class="search-form">
                <div class="search-input-group">
                    <div class="search-input-wrapper">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" placeholder="Nhập từ khóa tìm kiếm..." name="q">
                        <button type="button" class="voice-search-btn" title="Tìm kiếm bằng giọng nói">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                    <button class="search-submit-btn" type="submit">
                        <i class="fas fa-search me-2"></i>Tìm kiếm
                    </button>
                </div>
            </form>
            
            <div class="popular-keywords">
                <span class="keywords-label">Từ khóa phổ biến:</span>
                <div class="keyword-tags">
                    <a href="/TaiLieu?timKiem=deep+learning" class="keyword-tag">Deep Learning</a>
                    <a href="/TaiLieu?timKiem=java" class="keyword-tag">Lập trình Java</a>
                    <a href="/TaiLieu?timKiem=cấu+trúc+dữ+liệu" class="keyword-tag">Cấu trúc dữ liệu</a>
                    <a href="/TaiLieu?timKiem=AI" class="keyword-tag">Trí tuệ nhân tạo</a>
                    <a href="/TaiLieu?timKiem=kinh+tế" class="keyword-tag">Kinh tế</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="main-content">
    <div class="container">
        <div class="row">
            <!-- Main content: left column -->
            <div class="col-lg-8">
                <!-- Tài liệu phổ biến -->
                <div class="popular-documents-section">
                    <div class="section-header">
                        <h2 class="section-title">Tài liệu phổ biến</h2>
                        <a href="/TaiLieu?sapXep=luot_tai_desc" class="view-all-btn">
                            <span>Xem tất cả</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                    
                    <div class="documents-grid">
                        @foreach (var taiLieu in Model.TaiLieuPhoBien)
                        {
                            var moTaTomTat = taiLieu.MoTa.Length > 100 ? taiLieu.MoTa.Substring(0, 100) + "..." : taiLieu.MoTa;
                            <div class="document-card-wrapper">
                                <div class="document-card">
                                    <div class="card-header">
                                        <div class="doc-icon-wrapper">
                                            <i class="fas fa-file-alt"></i>
                                        </div>
                                        <div class="doc-info">
                                            <h3 class="doc-title">@(taiLieu.TenTaiLieu ?? "N/A")</h3>
                                            <div class="doc-meta">
                                                <span class="doc-author">
                                                    <i class="fas fa-user"></i>
                                                    @(taiLieu.TacGia ?? "N/A")
                                                </span>
                                                <span class="doc-date">
                                                    <i class="fas fa-calendar"></i>
                                                    @taiLieu.NgayTaiLen.ToString("dd/MM/yyyy")
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                                                         <div class="card-body">
                                         <!-- Mô tả tài liệu -->
                                         <div class="doc-description-section">
                                             <h4 class="description-title">
                                                 <i class="fas fa-info-circle"></i>
                                                 Mô tả
                                             </h4>
                                             <p class="doc-description">@Html.Raw(moTaTomTat ?? "Chưa có mô tả cho tài liệu này.")</p>
                                         </div>
                                         
                                         <!-- Thông tin chi tiết -->
                                         <div class="doc-details-section">
                                             <h4 class="details-title">
                                                 <i class="fas fa-list-alt"></i>
                                                 Chi tiết
                                             </h4>
                                             <div class="doc-stats">
                                                 <div class="stat-item">
                                                     <i class="fas fa-book-reader"></i>
                                                     <span>@taiLieu.SoLuongDaMuon lượt mượn</span>
                                                 </div>
                                                 <div class="stat-item">
                                                     <i class="fas fa-tag"></i>
                                                     <span>@(taiLieu.TenChuyenNganh ?? "N/A")</span>
                                                 </div>
                                                 <div class="stat-item">
                                                     <i class="fas fa-calendar-alt"></i>
                                                     <span>@taiLieu.NgayTaiLen.ToString("dd/MM/yyyy")</span>
                                                 </div>
                                             </div>
                                         </div>
                                         
                                         <!-- Actions -->
                                         <div class="card-actions">
                                             <div class="action-left">
                                                 <span class="doc-category">@(taiLieu.TenLoaiTaiLieu ?? "")</span>
                                                 <span class="doc-status available">
                                                     <i class="fas fa-check-circle"></i>
                                                     Có sẵn
                                                 </span>
                                             </div>
                                             <div class="action-right">
                                                 <a class="view-summary-btn" href="/TaiLieu/Details/@taiLieu.MaTaiLieu">
                                                     <i class="fas fa-eye"></i>
                                                     <span>Xem tóm tắt</span>
                                                 </a>
                                             </div>
                                         </div>
                                     </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
            
            <!-- Sidebar: right column -->
            <div class="col-lg-4">
                <div class="sidebar">
                    <div class="stats-card">
                        <div class="stats-header">
                            <h3 class="stats-title">
                                <i class="fas fa-chart-bar"></i>
                                Thống kê theo Chuyên ngành
                            </h3>
                        </div>
                        
                        <div class="stats-content">
                            @foreach (var item in Model.ThongKeTheoChuyenNganh)
                            {
                                <div class="stat-row">
                                    <div class="stat-label">@item.Key</div>
                                    <div class="stat-value">
                                        <span class="stat-number">@item.Value</span>
                                        <div class="stat-bar">
                                            <div class="stat-progress" style="width: @(item.Value * 100 / Model.ThongKeTheoChuyenNganh.Values.Max())%"></div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                        
                        <div class="stats-divider"></div>
                        
                        <div class="stats-header">
                            <h3 class="stats-title">
                                <i class="fas fa-layer-group"></i>
                                Thống kê theo Loại tài liệu
                            </h3>
                        </div>
                        
                        <div class="stats-content">
                            @foreach (var item in Model.ThongKeTheoLoaiTaiLieu)
                            {
                                <div class="stat-row">
                                    <div class="stat-label">@item.Key</div>
                                    <div class="stat-value">
                                        <span class="stat-number">@item.Value</span>
                                        <div class="stat-bar">
                                            <div class="stat-progress" style="width: @(item.Value * 100 / Model.ThongKeTheoLoaiTaiLieu.Values.Max())%"></div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal xem tóm tắt tài liệu -->
@{
    await Html.RenderPartialAsync("_DocumentSummaryModal");
}
    