@model QuanLyTaiLieuKhoaHoc.Web.Models.PhieuMuonTra
<div class="modal-header">
    <h5 class="modal-title">Chi tiết phiếu mượn/trả</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
    <dl class="row" style="word-break: break-word;">
        <dt class="col-sm-4">Mã phiếu</dt>
        <dd class="col-sm-8">@Model.MaPhieu</dd>
        <dt class="col-sm-4">Tên tài liệu</dt>
        <dd class="col-sm-8">@Model.TaiLieu?.TenTaiLieu</dd>
        <dt class="col-sm-4">Người mượn</dt>
        <dd class="col-sm-8">
            @if (Model.NguoiMuon != null)
            {
                @(Model.NguoiMuon.HoTen + " (" + Model.NguoiMuon.MaSo + ")")
            }
            else if (!string.IsNullOrEmpty(Model.HoTenNguoiMuon))
            {
                @(Model.HoTenNguoiMuon + 
                  (!string.IsNullOrEmpty(Model.MaSoNguoiMuon) ? " (" + Model.MaSoNguoiMuon + ")" : "") +
                  (!string.IsNullOrEmpty(Model.LoaiNguoiMuon) ? " - " + Model.LoaiNguoiMuon : ""))
            }
            else
            {
                @:"Không rõ"
            }
        </dd>
        @if (Model.NguoiMuon == null && (!string.IsNullOrEmpty(Model.EmailNguoiMuon) || !string.IsNullOrEmpty(Model.SoDienThoaiNguoiMuon)))
        {
            <dt class="col-sm-4">Thông tin liên hệ</dt>
            <dd class="col-sm-8">
                @if (!string.IsNullOrEmpty(Model.EmailNguoiMuon))
                {
                    @Model.EmailNguoiMuon
                }
                @if (!string.IsNullOrEmpty(Model.EmailNguoiMuon) && !string.IsNullOrEmpty(Model.SoDienThoaiNguoiMuon))
                {
                    @(" • ")
                }
                @if (!string.IsNullOrEmpty(Model.SoDienThoaiNguoiMuon))
                {
                    @Model.SoDienThoaiNguoiMuon
                }
            </dd>
        }
        <dt class="col-sm-4">Ngày mượn</dt>
        <dd class="col-sm-8">@Model.NgayMuon.ToString("dd/MM/yyyy HH:mm")</dd>
        <dt class="col-sm-4">Số lượng mượn</dt>
        <dd class="col-sm-8">@Model.SoLuongMuon bản</dd>
        <dt class="col-sm-4">Ngày trả</dt>
        <dd class="col-sm-8">
            @if (Model.NgayTra.HasValue)
            {
                @Model.NgayTra.Value.ToString("dd/MM/yyyy HH:mm")
            }
            else if (Model.NgayTraDuKien.HasValue)
            {
                @Model.NgayTraDuKien.Value.ToString("dd/MM/yyyy HH:mm")
            }
            else
            {
                @:"-"
            }
        </dd>
        <dt class="col-sm-4">Trạng thái</dt>
        <dd class="col-sm-8">@Model.TrangThai.ToString()</dd>
        <dt class="col-sm-4">Tình trạng sau trả</dt>
        <dd class="col-sm-8">@Model.TinhTrangSauTra</dd>
        <dt class="col-sm-4">Ghi chú</dt>
        <dd class="col-sm-8">@Model.GhiChu</dd>
        <dt class="col-sm-4">Thủ thư duyệt/trả</dt>
        <dd class="col-sm-8">@(Model.ThuThuDuyet?.HoTen ?? Model.ThuThuDuyet?.UserName ?? Model.MaThuThuDuyet)</dd>
    </dl>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
</div> 